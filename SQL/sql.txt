-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."CatalogItems"
(

    CONSTRAINT "PK_CatalogItems" PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."DriversDetails"
(

    CONSTRAINT "PK_DriversDetails" PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."LocationSupplier"
(

    CONSTRAINT "PK_LocationSupplier" PRIMARY KEY ("LocationsId", "SuppliersId")
);

CREATE TABLE IF NOT EXISTS public."Locations"
(

    CONSTRAINT "PK_Locations" PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."Models"
(

    CONSTRAINT "PK_Models" PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."Reservations"
(

    CONSTRAINT "PK_Reservations" PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."Suppliers"
(

    CONSTRAINT "PK_Suppliers" PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."Users"
(

    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."__EFMigrationsHistory"
(

    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);

ALTER TABLE IF EXISTS public."CatalogItems"
    ADD CONSTRAINT "FK_CatalogItems_Locations_LocationId" FOREIGN KEY ("LocationId")
    REFERENCES public."Locations" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;
CREATE INDEX IF NOT EXISTS "IX_CatalogItems_LocationId"
    ON public."CatalogItems"("LocationId");


ALTER TABLE IF EXISTS public."CatalogItems"
    ADD CONSTRAINT "FK_CatalogItems_Models_ModelId" FOREIGN KEY ("ModelId")
    REFERENCES public."Models" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;
CREATE INDEX IF NOT EXISTS "IX_CatalogItems_ModelId"
    ON public."CatalogItems"("ModelId");


ALTER TABLE IF EXISTS public."CatalogItems"
    ADD CONSTRAINT "FK_CatalogItems_Suppliers_SupplierId" FOREIGN KEY ("SupplierId")
    REFERENCES public."Suppliers" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;
CREATE INDEX IF NOT EXISTS "IX_CatalogItems_SupplierId"
    ON public."CatalogItems"("SupplierId");


ALTER TABLE IF EXISTS public."LocationSupplier"
    ADD CONSTRAINT "FK_LocationSupplier_Locations_LocationsId" FOREIGN KEY ("LocationsId")
    REFERENCES public."Locations" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public."LocationSupplier"
    ADD CONSTRAINT "FK_LocationSupplier_Suppliers_SuppliersId" FOREIGN KEY ("SuppliersId")
    REFERENCES public."Suppliers" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;
CREATE INDEX IF NOT EXISTS "IX_LocationSupplier_SuppliersId"
    ON public."LocationSupplier"("SuppliersId");


ALTER TABLE IF EXISTS public."Reservations"
    ADD CONSTRAINT "FK_Reservations_CatalogItems_CatalogItemId" FOREIGN KEY ("CatalogItemId")
    REFERENCES public."CatalogItems" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;
CREATE INDEX IF NOT EXISTS "IX_Reservations_CatalogItemId"
    ON public."Reservations"("CatalogItemId");


ALTER TABLE IF EXISTS public."Reservations"
    ADD CONSTRAINT "FK_Reservations_DriversDetails_DriversDetailsId" FOREIGN KEY ("DriversDetailsId")
    REFERENCES public."DriversDetails" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;
CREATE INDEX IF NOT EXISTS "IX_Reservations_DriversDetailsId"
    ON public."Reservations"("DriversDetailsId");


ALTER TABLE IF EXISTS public."Reservations"
    ADD CONSTRAINT "FK_Reservations_Users_UserId" FOREIGN KEY ("UserId")
    REFERENCES public."Users" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;
CREATE INDEX IF NOT EXISTS "IX_Reservations_UserId"
    ON public."Reservations"("UserId");

END;